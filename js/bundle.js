!function(){"use strict";function e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){W.textContent="Default sound",W.value="reset",K.classList.remove("default-sound")}function i(){Y.src=X,J.classList.remove("playing"),W.textContent="Custom sound",W.value="upload",K.classList.add("default-sound"),R.emit("alarm-sound:reset")}function o(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];!Y.error&&Y.src&&(Y.paused?Y.play():(e||Y.pause(),Y.currentTime=0))}function r(e){var t=new FileReader;t.onload=function(e){R.emit("alarm-sound:set",Y.src=e.target.result),J.classList.remove("playing")},t.readAsDataURL(e)}function a(){U.seed.baseVal=(U.seed.baseVal+1)%100,H.r.baseVal.value+=.5*a.radCoeff,H.r.baseVal.value>25?a.radCoeff=-1:H.r.baseVal.value<20&&(a.radCoeff=1),a.on&&requestAnimationFrame(a)}function c(){a.on=!0,U.numOctaves.baseVal=5,requestAnimationFrame(a)}function u(){a.on=!1,U.numOctaves.baseVal=0}function d(e){return K.classList.toggle("dropzone",K.contains(document.elementFromPoint(e.clientX,e.clientY)))}function l(){($.checked||ee.checked)&&f()}function h(){$.disabled=ee.disabled=!0,$.checked=ee.checked=!1}function f(){"granted"!==Notification.permission&&"denied"!==Notification.permission&&Notification.requestPermission().then(function(e){"denied"===e?($.onclick=ee.onclick=null,h()):"granted"===e&&($.onclick=ee.onclick=null)})}function v(e){if(null!==$&&"granted"===Notification.permission){var t="break"===e;(t&&$.checked||!t&&ee.checked)&&(te=m(t),te.onclose=function(){te=null},te.onclick=function(){window.focus(),te.close()})}}function m(e){var t=e?"Time for a Break":"Time for Work",n=e?"Good work! Time for a break.":"Ready for more? Time for work.";return new Notification(t,{body:n,icon:ne})}function k(){R.emit("work-timer:++",le)}function p(){R.emit("work-timer:--",le)}function g(){R.emit("break-timer:++",le)}function _(){R.emit("break-timer:--",le)}function y(e){function t(){e(),i=setInterval(e,s)}function n(){clearInterval(i)}var s=arguments.length<=1||void 0===arguments[1]?200:arguments[1],i=void 0;return{start:t,stop:n}}function S(e,t){var n=t.start,s=t.stop;e.addEventListener("mousedown",n),e.addEventListener("mouseup",s),e.addEventListener("mouseleave",s)}function b(e,t){e.addEventListener("keydown",function(e){32!==e.keyCode&&13!==e.keyCode||t()})}function w(e,t){"work"===t?(se.disabled=ce.disabled=ae.disabled=e,he.stop(),fe.stop()):"break"===t&&(re.disabled=oe.disabled=ie.disabled=de.disabled=ue.disabled=e,ve.stop(),me.stop())}function E(){return parseInt(ke.textContent,10)}function I(){return parseInt(pe.textContent,10)}function L(e){return 1>e?1:e}function x(e,t){R.emit(e+"-timer:time-set",60*t)}function C(e){return JSON.parse(localStorage[e])}function O(){Q.checked=C("check-pause-on-break-start"),Z.checked=C("check-pause-on-work-start"),$&&"Notification"in window&&"granted"===Notification.permission&&($.checked=C("notify-break"),ee.checked=C("notify-work")),ke.textContent=C("work-timer"),pe.textContent=C("break-timer"),ge.checked=C("check-volume"),_e.checked=C("check-clock-seconds"),ye.checked=C("check-clock-filled"),Se.checked=C("check-progress");var e=localStorage["alarm-sound"];e&&(Y.src=e,s())}function T(){R.emit("check-pause-on-break-start:changed",Q.checked),R.emit("check-pause-on-work-start:changed",Z.checked),$&&(R.emit("notify-break:changed",$.checked),R.emit("notify-work:changed",ee.checked)),R.emit("work-timer:time-set",60*parseInt(ke.textContent,10)),R.emit("break-timer:time-set",60*parseInt(pe.textContent,10)),R.emit("check-volume:changed",ge.checked),R.emit("check-clock-seconds:changed",_e.checked),R.emit("check-clock-filled:changed",ye.checked,!0),R.emit("check-progress:changed",Se.checked)}function N(){Ce.classList.remove("changing"),Ce.classList.add("no-transition")}function B(e,t,n,s){var i=e>=1?e+":"+(10>t?"0"+t:t):t;Oe!==i&&(Oe=i),s&&(Ce.textContent=Oe),n&&(Ce.classList.remove("no-transition"),Ce.classList.add("changing"))}function V(e,t){var n=e>=1?e+":"+(10>t?"0"+t:t):t;N(),Oe=n,Ce.textContent=n}function q(e){var t=100-5*e/3;Te.style["stroke-dashoffset"]=-Be*t}function P(e){q(0===e?60:e),10>e&&(e="0"+e),Ve.textContent=":"+e}function M(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=Math.floor(e%3600%60);return{h:t,m:n,s:s}}var F=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),A=function(){function e(){n(this,e),this.events={}}return F(e,[{key:"on",value:function(e,t){this.events[e]?this.events[e].push(t):this.events[e]=[t]}},{key:"off",value:function(e,t){if(void 0==t)return void(this.events[e]=void 0);var n=this.events[e];if(n){var s=n.indexOf(t);-1!==s&&n.splice(s,1)}}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;t>s;s++)n[s-1]=arguments[s];this.events[e]&&this.events[e].forEach(function(e){e.apply(void 0,n)})}}]),e}(),D=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?new A:arguments[0];if(n(this,e),!(t instanceof A))throw new TypeError("eventDispatcher must be an instance of EventDispatcher");this._dispatcher=t}return F(e,[{key:"on",value:function(){var e;(e=this.dispatcher).on.apply(e,arguments)}},{key:"off",value:function(){var e;(e=this.dispatcher).off.apply(e,arguments)}},{key:"emit",value:function(){var e;(e=this.dispatcher).emit.apply(e,arguments)}},{key:"dispatcher",get:function(){return this._dispatcher}}]),e}(),R=new A;R.on("timer:session-changed",function(e){var t=e.reason;"previous-session-ended"===t&&ge.checked&&o(!0)});var j=document.getElementById("volume");j.oninput=function(){Y.volume=this.value};var z=document.getElementById("file-upload"),W=document.getElementById("reset-upload-btn"),X="audio/alarm.mp3",Y=new Audio(X);W.addEventListener("click",function(){"upload"===this.value?(z.value="",z.click()):i()}),z.addEventListener("change",function(){0!==this.files.length&&(r(this.files[0]),s())});var G=document.getElementById("speakerSvg"),J=G.parentElement;G.addEventListener("click",function(){return o()}),Y.addEventListener("play",function(){J.classList.add("playing"),c()}),Y.addEventListener("pause",function(){J.classList.remove("playing"),u()}),Y.addEventListener("canplay",function(){J.classList.remove("error"),Y.paused&&u()}),Y.addEventListener("error",function(e){J.classList.add("error"),u()});var U=document.getElementById("feTurbulence6680"),H=document.getElementById("speakerInner");a.on=!1,a.radCoeff=1;var K=document.getElementById("speakerPanel");K.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()}),K.addEventListener("dragenter",function(e){e.stopPropagation(),e.preventDefault(),K.classList.add("dropzone")}),K.addEventListener("dragend",function(e){e.stopPropagation(),e.preventDefault(),K.classList.remove("dropzone")}),K.addEventListener("dragleave",function(e){e.stopPropagation(),e.preventDefault(),d(e)}),K.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),K.classList.remove("dropzone");var t=e.dataTransfer.files[0];0===t.type.indexOf("audio/")&&(r(t),s())});var Q=document.getElementById("pause-on-break-start"),Z=document.getElementById("pause-on-work-start");Q.addEventListener("change",function(){R.emit("check-pause-on-break-start:changed",this.checked)}),Z.addEventListener("change",function(){R.emit("check-pause-on-work-start:changed",this.checked)});var $=document.getElementById("notify-break"),ee=document.getElementById("notify-work");$.addEventListener("change",function(){R.emit("notify-break:changed",this.checked)}),ee.addEventListener("change",function(){R.emit("notify-work:changed",this.checked)}),$.onclick=ee.onclick=l,function(){if("Notification"in window)"denied"===Notification.permission&&h();else{$=ee=null;var e=document.querySelector(".notificationControls");e.parentNode.removeChild(e)}}();var te=void 0;document.addEventListener("click",function(){te&&te.close()});var ne="images/clock_red.png";R.on("timer:session-changed",function(e){var t=e.started.session.name,n=e.reason;"previous-session-ended"===n&&v(t)});var se=document.getElementById("work-25"),ie=document.getElementById("short-break-5"),oe=document.getElementById("long-break-15"),re=document.getElementById("long-break-30");se.addEventListener("click",function(){R.emit("work-timer:set",25)}),ie.addEventListener("click",function(){R.emit("break-timer:set",5)}),oe.addEventListener("click",function(){R.emit("break-timer:set",15)}),re.addEventListener("click",function(){R.emit("break-timer:set",30)});var ae=document.querySelector(".workTimer > .plus"),ce=document.querySelector(".workTimer > .minus"),ue=document.querySelector(".breakTimer > .plus"),de=document.querySelector(".breakTimer > .minus"),le=1;document.addEventListener("keydown",function(e){16===e.keyCode&&(le=5)}),document.addEventListener("keyup",function(e){16===e.keyCode&&(le=1)});var he=y(k),fe=y(p),ve=y(g),me=y(_);S(ae,he),S(ce,fe),S(ue,ve),S(de,me),b(ae,k),b(ce,p),b(ue,g),b(de,_),R.on("timer:state-changed",function(e){var t=e.currentState,n=e.session.name;w("active"===t,n)}),R.on("timer:session-changed",function(e){var t=e.ended.session.name,n=e.started.session.name;w(!1,t),w(!0,n)});var ke=document.querySelector(".workTimer > .time"),pe=document.querySelector(".breakTimer > .time");R.on("work-timer:++",function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=parseInt(ke.textContent,10),n=t+1*e;n=L(n),t!==n&&(ke.textContent=n,x("work",n))}),R.on("work-timer:--",function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=parseInt(ke.textContent,10),n=t-1*e;n=L(n),t!==n&&(ke.textContent=n,x("work",n))}),R.on("work-timer:set",function(e){parseInt(ke.textContent,10)!==e&&(ke.textContent=e,x("work",e))}),R.on("break-timer:++",function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=parseInt(pe.textContent,10),n=t+1*e;n=L(n),t!==n&&(pe.textContent=n,x("break",n))}),R.on("break-timer:--",function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=parseInt(pe.textContent,10),n=t-1*e;n=L(n),t!==n&&(pe.textContent=n,x("break",n))}),R.on("break-timer:set",function(e){parseInt(pe.textContent,10)!==e&&(pe.textContent=e,x("break",e))}),R.on("check-pause-on-break-start:changed",function(e){localStorage["check-pause-on-break-start"]=e}),R.on("check-pause-on-work-start:changed",function(e){localStorage["check-pause-on-work-start"]=e}),R.on("notify-break:changed",function(e){localStorage["notify-break"]=e}),R.on("notify-work:changed",function(e){localStorage["notify-work"]=e}),R.on("work-timer:time-set",function(e){localStorage["work-timer"]=e/60}),R.on("break-timer:time-set",function(e){localStorage["break-timer"]=e/60}),R.on("check-volume:changed",function(e){localStorage["check-volume"]=e}),R.on("check-clock-seconds:changed",function(e){localStorage["check-clock-seconds"]=e}),R.on("check-clock-filled:changed",function(e){localStorage["check-clock-filled"]=e}),R.on("check-progress:changed",function(e){localStorage["check-progress"]=e}),R.on("alarm-sound:set",function(e){localStorage["alarm-sound"]=e}),R.on("alarm-sound:reset",function(){delete localStorage["alarm-sound"]}),window.addEventListener("DOMContentLoaded",function(){if(localStorage.getItem("check-pause-on-break-start"))try{O()}catch(e){}document.querySelector(".wrapper").classList.remove("transparent"),T()});var ge=document.getElementById("check-volume"),_e=document.getElementById("check-clock-seconds"),ye=document.getElementById("check-clock-filled"),Se=document.getElementById("check-progress");ge.onchange=function(){},ge.oninput=function(){},ge.addEventListener("change",function(){R.emit("check-volume:changed",this.checked)}),_e.addEventListener("change",function(){R.emit("check-clock-seconds:changed",this.checked)}),ye.addEventListener("change",function(){R.emit("check-clock-filled:changed",this.checked)}),Se.addEventListener("change",function(){R.emit("check-progress:changed",this.checked)});var be=document.getElementById("skipSession");be.addEventListener("click",function(){R.emit("skip-session-button-clicked")});var we=function(){function e(t){var s=arguments.length<=1||void 0===arguments[1]?50:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?50:arguments[3];n(this,e),this._element=t,this._startX=s,this._startY=i,this._radius=o,this._dl="M"+s+","+i+" a"+o+","+o+" 0"}return F(e,[{key:"_getNewCoord",value:function(e){var t=2*Math.PI*e/100,n=this._radius;return{x:n*Math.sin(t),y:n*(1-Math.cos(t))}}},{key:"drawArc",value:function(e){e=100-e;var t=void 0,n=100===e||0===e?"":"L50,50 z";50>=e?(t="1,0",0===e&&(e=.01)):t="0,0 ";var s=this._getNewCoord(e);this._element.setAttribute("d",this._dl+" "+t+" "+s.x+","+s.y+" "+n)}}]),e}(),Ee=document.getElementById("totalProgressBar");R.on("check-progress:changed",function(e){Ee.classList.toggle("progress-off",!e)});var Ie=new we(document.getElementById("arcMask"));R.on("timer:session-in-progress",function(e){var t=e.session,n=(t.name,t.left),s=t.len,i=Math.round(n/s*100);Ie.drawArc(i),Ee.value=100-i}),R.on("timer:session-modified",function(e){var t=e.modification,n=t.valueName,s=(t.newValue,e.isCurrentSession);"len"===n&&s&&(Ie.drawArc(100),Ee.value=0)});var Le=function(s){function i(t){n(this,i);var s=e(this,Object.getPrototypeOf(i).call(this,t.eventDispatcher)),o={updateFrequency:1,loop:!0,pauseOnSessionStart:!1,pauseOnSessionEnd:!1,reversed:!1},r=Object.assign({},o,t);s._updateFrequency=r.updateFrequency,s._loop=r.loop,s._pauseOnSessionStart=r.pauseOnSessionStart,s._pauseOnSessionEnd=r.pauseOnSessionEnd,s._reversed=r.reversed,s._state="idle";for(var a=arguments.length,c=Array(a>1?a-1:0),u=1;a>u;u++)c[u-1]=arguments[u];s._sessions=c;var d=s._reversed?s._sessions.length-1:0;s._currentSession=c[d],s._currentSessionIndex=d,s._sessionsByName={};var l=!0,h=!1,f=void 0;try{for(var v,m=c[Symbol.iterator]();!(l=(v=m.next()).done);l=!0){var k=v.value;i.checkTimeValidity(k.len),s._sessionsByName[k.name]=k}}catch(p){h=!0,f=p}finally{try{!l&&m["return"]&&m["return"]()}finally{if(h)throw f}}return s}return t(i,s),F(i,[{key:"isIdle",value:function(){return"idle"===this._state}},{key:"isActive",value:function(){return"active"===this._state}},{key:"isPaused",value:function(){return"paused"===this._state}},{key:"addSession",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._sessions.length:arguments[1];i.checkTimeValidity(e.len),this._sessions.splice(t,0,e),this._sessionsByName[e.name]=e;var n=this._currentSessionIndex===t;n&&(this._currentSession=e,(this.isActive()||this.isPaused())&&this._resetCurrentSessionIfElapsed()),this._onSessionModified(e,{valueName:"new-session"},n)}},{key:"getElapsedSessions",value:function(){return this._sessions.filter(function(e){return 0===e.left})}},{key:"getSession",value:function(e){return this._sessionsByName[e]}},{key:"getSessionIndex",value:function(e){var t=this.getSession(e);return t?this._sessions.indexOf(t):-1}},{key:"getSessionByIndex",value:function(e){return this._sessions[e]}},{key:"setLength",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._currentSession.name:arguments[1],n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];i.checkTimeValidity(e);var s=this._sessionsByName[t];if(s){var o={valueName:"len",oldValue:s.len,newValue:e};s.len=e;var r=s===this._currentSession;r&&n&&this.resetCurrentSession(),this._onSessionModified(s,o,r),0===e&&r&&this._sessionTransition()}}},{key:"setTimeLeft",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this._currentSession.name:arguments[1];i.checkTimeValidity(e);var n=this._sessionsByName[t];if(n){var s={valueName:"left",oldValue:n.left,newValue:e};n.left=e;var o=n===this._currentSession;this._onSessionModified(n,s,o),0===e&&o&&this._sessionTransition()}}},{key:"setSessionToSkip",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this._currentSession.name:arguments[1],n=this._sessionsByName[t];if(n){var s={valueName:"skip",oldValue:n.skip,newValue:e};n.skip=e;var i=n===this._currentSession;this._onSessionModified(n,s,i),e&&i&&this._sessionTransition()}}},{key:"setSessionToPauseOnStart",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this._currentSession.name:arguments[1],n=this._sessionsByName[t];if(n){var s={valueName:"pauseOnStart",oldValue:n.pauseOnStart,newValue:e};n.pauseOnStart=e;var i=n===this._currentSession;this._onSessionModified(n,s,i)}}},{key:"setSessionToPauseOnEnd",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this._currentSession.name:arguments[1],n=this._sessionsByName[t];if(n){var s={valueName:"pauseOnEnd",oldValue:n.pauseOnEnd,newValue:e};n.pauseOnEnd=e;var i=n===this._currentSession;this._onSessionModified(n,s,i)}}},{key:"start",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"called-from-without":arguments[0];this._pause(),this.reset(),this.resume(e)}},{key:"startFromSession",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"called-from-without":arguments[1];this._pause();var n=this.getSession(e);n&&(this._currentSession=n,this._currentSessionIndex=this._sessions.indexOf(n),this.resetCurrentSession(),this.resume(t))}},{key:"stop",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"called-from-without":arguments[0],t=this._state;this._pause(),this.resetOrder(),this._state="idle",this._onStateChanged(t,e)}},{key:"pause",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"called-from-without":arguments[0],t=this._state;this._pause(),this._state="paused",this._onStateChanged(t,e)}},{key:"_pause",value:function(){clearInterval(this.intervalId)}},{key:"resume",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"called-from-without":arguments[0];if(this._currentSession){var t=this._state;this._resume(),this._state="active",this._onStateChanged(t,e)}}},{key:"_resume",value:function(){this._onSessionProgress(),this.intervalId=setInterval(this._decrement.bind(this),1e3*this._updateFrequency)}},{key:"reset",value:function(){this.resetOrder(),this.resetCurrentSession()}},{key:"resetOrder",value:function(){var e=this._reversed?this._sessions.length-1:0;this._currentSession=this._sessions[e],this._currentSessionIndex=e}},{key:"resetCurrentSession",value:function(){this._currentSession&&(this._currentSession.left=this._currentSession.len)}},{key:"_resetCurrentSessionIfElapsed",value:function(){var e=this._currentSession.left;(void 0===e||0>=e)&&this.resetCurrentSession()}},{key:"_decrement",value:function(){if(this._currentSession.left<=0&&this._sessionTransition(),this._currentSession.left-=this._updateFrequency,this._currentSession.left<0&&(this._currentSession.left=0),this._onSessionProgress(),0===this._currentSession.left){if(this._pauseOnEndIfRequired())return;this._sessionTransition()}}},{key:"_sessionTransition",value:function(){this._goToNextSession("previous-session-ended"),null==this._currentSession?this.stop("no-next-session"):(this._resetCurrentSessionIfElapsed(),this._onSessionProgress(),this._pauseOnStartIfRequired())}},{key:"_goToNextSession",value:function(e){var t={session:this._currentSession,index:this._currentSessionIndex},n=this._getNextSession();this._currentSessionIndex=n.index,this._currentSession=n.session,this._currentSession&&this._resetCurrentSessionIfElapsed(),this._onSessionChanged(t,e)}},{key:"_getNextSession",value:function(){var e=this._currentSessionIndex,t=void 0;do{if(this._reversed?--e:++e,(e===this._sessions.length||-1===e)&&(e=this._reversed?this._sessions.length-1:0,!this._loop)){t=null;break}if(e===this._currentSessionIndex){e=this._reversed?this._sessions.length-1:0,t=null;break}t=this._sessions[e]}while(t.skip);return{index:e,session:t}}},{key:"skipToNextSession",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this._skipSession(e,t,"skipped-to-next-session")}},{key:"_skipSession",value:function(e,t,n){return t&&this.resetCurrentSession(),this._goToNextSession(n),this.resetCurrentSession(),null==this._currentSession?this.stop("no-next-session"):(this._onSessionProgress(),void(e&&this.pause("paused-on-start")))}},{key:"skipToPreviousSession",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];this._reversed=!this._reversed,this._skipSession(e,t,"skipped-to-previous-session"),this._reversed=!this._reversed}},{key:"_pauseOnStartIfRequired",value:function(){var e=this._pauseOnSessionStart||this._currentSession.pauseOnStart;return e&&this.pause("paused-on-start"),e}},{key:"_pauseOnEndIfRequired",value:function(){var e=this.pauseOnSessionEnd||this._currentSession.pauseOnEnd;return e&&this.pause("paused-on-end"),e}},{key:"_onStateChanged",value:function(e,t){this.emit("timer:state-changed",{previousState:e,currentState:this._state,session:this._currentSession,index:this._currentSessionIndex,reason:t})}},{key:"_onSessionChanged",value:function(e,t){this.emit("timer:session-changed",{ended:e,started:{session:this._currentSession,index:this._currentSessionIndex},reason:t})}},{key:"_onSessionProgress",value:function(){this.emit("timer:session-in-progress",{session:this._currentSession,index:this._currentSessionIndex})}},{key:"_onSessionModified",value:function(e,t,n){this.emit("timer:session-modified",{session:e,modification:t,isCurrentSession:n,timerState:this.state})}},{key:"_onOptionsModified",value:function(e){this.emit("timer:options-modified",{modification:e,timerState:this.state})}},{key:"sessions",get:function(){return this._sessions},set:function(e){this._sessionsByName={},this._sessions=e;var t=!0,n=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;i.checkTimeValidity(a.len),this._sessionsByName[a.name]=a}}catch(c){n=!0,s=c}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw s}}this._pause(),this.reset(),this._onSessionModified(e,{valueName:"new-sessions"})}},{key:"state",get:function(){return this._state}},{key:"sessionsCount",get:function(){return this._sessions.length}},{key:"currentSession",get:function(){return this._currentSession}},{key:"currentSessionIndex",get:function(){return this._currentSessionIndex}},{key:"updateFrequency",get:function(){return this._updateFrequency},set:function(e){i.checkTimeValidity(e);var t={valueName:"updateFrequency",oldValue:this._updateFrequency,newValue:e};this._updateFrequency=e,this._onOptionsModified(t),this.isActive()&&(this._pause(),this._resume())}},{key:"loop",get:function(){return this._loop},set:function(e){var t={valueName:"loop",oldValue:this._loop,newValue:e};this._loop=e,this._onOptionsModified(t)}},{key:"reversed",get:function(){return this._reversed},set:function(e){var t={valueName:"reversed",oldValue:this._reversed,newValue:e};this._reversed=e,this._onOptionsModified(t)}},{key:"pauseOnSessionStart",get:function(){return this._pauseOnSessionStart},set:function(e){var t={valueName:"pauseOnSessionStart",oldValue:this._pauseOnSessionStart,newValue:e};this._pauseOnSessionStart=e,this._onOptionsModified(t)}},{key:"pauseOnSessionEnd",get:function(){return this._pauseOnSessionEnd},set:function(e){var t={valueName:"pauseOnSessionEnd",oldValue:this._pauseOnSessionEnd,newValue:e};this._pauseOnSessionEnd=e,this._onOptionsModified(t)}}],[{key:"checkTimeValidity",value:function(e){if(0>e||"number"!=typeof e)throw new RangeError("time must be a positive number")}}]),i}(D),xe=new Le({eventDispatcher:R},{name:"work",len:60*E()},{name:"break",len:60*I()});R.on("work-timer:time-set",function(e){xe.setLength(e,"work",!0)}),R.on("break-timer:time-set",function(e){xe.setLength(e,"break",!0)}),R.on("tomato-big-button-clicked",function(){switch(xe.state){case"idle":xe.start();break;case"active":xe.pause();break;case"paused":xe.resume();break;default:return}}),R.on("check-pause-on-break-start:changed",function(e){xe.setSessionToPauseOnStart(e,"break")}),R.on("check-pause-on-work-start:changed",function(e){xe.setSessionToPauseOnStart(e,"work")}),R.on("skip-session-button-clicked",function(e){xe.skipToNextSession(!0)});var Ce=document.getElementById("minutesSvg"),Oe=Ce.textContent;Ce.addEventListener("transitionend",function(){this.textContent=Oe,this.classList.remove("changing")});var Te=document.getElementById("secondsLeft"),Ne=parseInt(Te.getAttribute("r"),10),Be=Math.round(6.285714286*Ne)/100,Ve=document.getElementById("secondsLeftText");R.on("check-clock-seconds:changed",function(e){Te.classList.toggle("invisible",!e)}),R.on("timer:session-modified",function(e){var t=e.modification,n=t.valueName,s=t.newValue,i=e.isCurrentSession;if("len"===n&&i){var o=M(s),r=o.h,a=o.m,c=o.s;V(r,a),P(c)}}),R.on("timer:session-in-progress",function(e){var t=e.session,n=(t.name,t.left),s=t.len,i=M(n),o=i.h,r=i.m,a=i.s;B(o,r,0===a,n===s),P(a)});var qe=document.getElementById("sessionName");R.on("timer:session-changed",function(e){var t=e.started.session,n=t.name;t.len;qe.textContent=n,document.title="work"===n?"Work Time":"Break Time"});var Pe=document.getElementById("pausedState");R.on("timer:state-changed",function(e){var t=e.currentState,n=e.session.name,s=e.reason,i="paused"===t;i&&"paused-on-start"===s&&N(),Pe.classList.toggle("hidden",!i);var o="work"===n?"Work Time":"Break Time";i&&(o+=" : Paused"),document.title=o}),document.addEventListener("visibilitychange",function(){if("visible"===document.visibilityState){var e=M(null==xe.currentSession.left?xe.currentSession.len:xe.currentSession.left),t=e.h,n=e.m;V(t,n)}});var Me=document.querySelector(".all-tomato");R.on("check-clock-filled:changed",function(e,t){if(t){if(e!==Me.classList.contains("transparent"))return;Me.classList.add("no-transition"),Me.classList.toggle("transparent",!e),Me.clientWidth,Me.classList.remove("no-transition")}else Me.classList.toggle("transparent",!e)});var Fe=document.querySelector(".tomatoTimer");Fe.addEventListener("click",function(){R.emit("tomato-big-button-clicked")})}();
//# sourceMappingURL=../maps/bundle.js.map
